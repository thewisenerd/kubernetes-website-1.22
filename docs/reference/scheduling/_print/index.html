<!doctype html><html lang=en class=no-js>
<head>
<meta name=ROBOTS content="NOINDEX, NOFOLLOW">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JPP6RFM2BP"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-JPP6RFM2BP')</script>
<link rel=alternate hreflang=zh href=https://kubernetes.io/zh/docs/reference/scheduling/>
<link rel=alternate hreflang=ko href=https://kubernetes.io/ko/docs/reference/scheduling/>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=generator content="Hugo 0.87.0">
<link rel=canonical type=text/html href=https://kubernetes.io/docs/reference/scheduling/>
<link rel="shortcut icon" type=image/png href=/images/favicon.png>
<link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180>
<link rel=manifest href=/manifest.webmanifest>
<link rel=apple-touch-icon href=/images/kubernetes-192x192.png>
<title>Scheduling | Kubernetes</title><meta property="og:title" content="Scheduling">
<meta property="og:description" content="Production-Grade Container Orchestration">
<meta property="og:type" content="website">
<meta property="og:url" content="https://kubernetes.io/docs/reference/scheduling/"><meta property="og:site_name" content="Kubernetes">
<meta itemprop=name content="Scheduling">
<meta itemprop=description content="Production-Grade Container Orchestration"><meta name=twitter:card content="summary">
<meta name=twitter:title content="Scheduling">
<meta name=twitter:description content="Production-Grade Container Orchestration">
<link href=/scss/main.css rel=stylesheet>
<script src=/js/jquery-3.3.1.min.js integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin=anonymous></script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","url":"https://kubernetes.io","logo":"https://kubernetes.io/images/favicon.png"}</script>
<meta name=theme-color content="#326ce5">
<link rel=stylesheet href=/css/feature-states.css>
<meta name=description content>
<meta property="og:description" content>
<meta name=twitter:description content>
<meta property="og:url" content="https://kubernetes.io/docs/reference/scheduling/">
<meta property="og:title" content="Scheduling">
<meta name=twitter:title content="Scheduling">
<meta name=twitter:image content="https://kubernetes.io/images/favicon.png">
<meta name=twitter:image:alt content="Kubernetes">
<meta property="og:image" content="/images/kubernetes-horizontal-color.png">
<meta property="og:type" content="article">
<script src=/js/script.js></script>
</head>
<body class=td-section>
<header>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar" data-auto-burger=primary>
<a class=navbar-brand href=/></a>
<div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar>
<ul class="navbar-nav mt-2 mt-lg-0">
<li class="nav-item mr-2 mb-lg-0">
<a class="nav-link active" href=/docs/>Documentation</span></a>
</li>
<li class="nav-item mr-2 mb-lg-0">
<a class=nav-link href=/blog/>Kubernetes Blog</span></a>
</li>
<li class="nav-item mr-2 mb-lg-0">
<a class=nav-link href=/training/>Training</span></a>
</li>
<li class="nav-item mr-2 mb-lg-0">
<a class=nav-link href=/partners/>Partners</span></a>
</li>
<li class="nav-item mr-2 mb-lg-0">
<a class=nav-link href=/community/>Community</span></a>
</li>
<li class="nav-item mr-2 mb-lg-0">
<a class=nav-link href=/case-studies/>Case Studies</span></a>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>
Versions
</a>
<div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink>
<a class=dropdown-item href=/releases>Release Information</a>
<a class=dropdown-item href=https://kubernetes.io/docs/reference/scheduling/>v1.26</a>
<a class=dropdown-item href=https://v1-25.docs.kubernetes.io/docs/reference/scheduling/>v1.25</a>
<a class=dropdown-item href=https://v1-24.docs.kubernetes.io/docs/reference/scheduling/>v1.24</a>
<a class=dropdown-item href=https://v1-23.docs.kubernetes.io/docs/reference/scheduling/>v1.23</a>
<a class=dropdown-item href=https://v1-22.docs.kubernetes.io/docs/reference/scheduling/>v1.22</a>
</div>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdownMenuLink role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>
English
</a>
<div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink>
<a class=dropdown-item href=/zh/docs/reference/scheduling/>中文 Chinese</a>
<a class=dropdown-item href=/ko/docs/reference/scheduling/>한국어 Korean</a>
</div>
</li>
</ul>
</div>
<button id=hamburger onclick=kub.toggleMenu() data-auto-burger-exclude><div></div></button>
</nav>
</header>
<div class="container-fluid td-outer">
<div class=td-main>
<div class="row flex-xl-nowrap">
<div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
</div>
<div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
</div>
<main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main>
<div class=td-content>
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.
</p><p>
<a href=/docs/reference/scheduling/>Return to the regular view of this page</a>.
</p>
</div>
<h1 class=title>Scheduling</h1>
<ul>
<li>1: <a href=#pg-5a0a68fb6a7ffefb6d5f861100fa0ae3>Scheduling Policies</a></li>
<li>2: <a href=#pg-ef4fb938b6b63c95f5f26f9b1cec3054>Scheduler Configuration</a></li>
</ul>
<div class=content>
</div>
</div>
<div class=td-content>
<h1 id=pg-5a0a68fb6a7ffefb6d5f861100fa0ae3>1 - Scheduling Policies</h1>
<p>A scheduling Policy can be used to specify the <em>predicates</em> and <em>priorities</em>
that the <a class=glossary-tooltip title="Control plane component that watches for newly created pods with no assigned node, and selects a node for them to run on." data-toggle=tooltip data-placement=top href=/docs/reference/command-line-tools-reference/kube-scheduler/ target=_blank aria-label=kube-scheduler>kube-scheduler</a>
runs to <a href=/docs/concepts/scheduling-eviction/kube-scheduler/#kube-scheduler-implementation>filter and score nodes</a>,
respectively.</p>
<p>You can set a scheduling policy by running
<code>kube-scheduler --policy-config-file &lt;filename></code> or
<code>kube-scheduler --policy-configmap &lt;ConfigMap></code>
and using the <a href=/docs/reference/config-api/kube-scheduler-policy-config.v1/>Policy type</a>.</p>
<h2 id=predicates>Predicates</h2>
<p>The following <em>predicates</em> implement filtering:</p>
<ul>
<li>
<p><code>PodFitsHostPorts</code>: Checks if a Node has free ports (the network protocol kind)
for the Pod ports the Pod is requesting.</p>
</li>
<li>
<p><code>PodFitsHost</code>: Checks if a Pod specifies a specific Node by its hostname.</p>
</li>
<li>
<p><code>PodFitsResources</code>: Checks if the Node has free resources (eg, CPU and Memory)
to meet the requirement of the Pod.</p>
</li>
<li>
<p><code>MatchNodeSelector</code>: Checks if a Pod's Node <a class=glossary-tooltip title="Allows users to filter a list of resources based on labels." data-toggle=tooltip data-placement=top href=/docs/concepts/overview/working-with-objects/labels/ target=_blank aria-label=Selector>Selector</a>
matches the Node's <a class=glossary-tooltip title="Tags objects with identifying attributes that are meaningful and relevant to users." data-toggle=tooltip data-placement=top href=/docs/concepts/overview/working-with-objects/labels target=_blank aria-label=label(s)>label(s)</a>.</p>
</li>
<li>
<p><code>NoVolumeZoneConflict</code>: Evaluate if the <a class=glossary-tooltip title="A directory containing data, accessible to the containers in a pod." data-toggle=tooltip data-placement=top href=/docs/concepts/storage/volumes/ target=_blank aria-label=Volumes>Volumes</a>
that a Pod requests are available on the Node, given the failure zone restrictions for
that storage.</p>
</li>
<li>
<p><code>NoDiskConflict</code>: Evaluates if a Pod can fit on a Node due to the volumes it requests,
and those that are already mounted.</p>
</li>
<li>
<p><code>MaxCSIVolumeCount</code>: Decides how many <a class=glossary-tooltip title="The Container Storage Interface (CSI) defines a standard interface to expose storage systems to containers." data-toggle=tooltip data-placement=top href=/docs/concepts/storage/volumes/#csi target=_blank aria-label=CSI>CSI</a>
volumes should be attached, and whether that's over a configured limit.</p>
</li>
<li>
<p><code>PodToleratesNodeTaints</code>: checks if a Pod's <a class=glossary-tooltip title="A core object consisting of three required properties: key, value, and effect. Tolerations enable the scheduling of pods on nodes or node groups that have a matching taint." data-toggle=tooltip data-placement=top href=/docs/concepts/scheduling-eviction/taint-and-toleration/ target=_blank aria-label=tolerations>tolerations</a>
can tolerate the Node's <a class=glossary-tooltip title="A core object consisting of three required properties: key, value, and effect. Taints prevent the scheduling of pods on nodes or node groups." data-toggle=tooltip data-placement=top href=/docs/concepts/scheduling-eviction/taint-and-toleration/ target=_blank aria-label=taints>taints</a>.</p>
</li>
<li>
<p><code>CheckVolumeBinding</code>: Evaluates if a Pod can fit due to the volumes it requests.
This applies for both bound and unbound
<a class=glossary-tooltip title="Claims storage resources defined in a PersistentVolume so that it can be mounted as a volume in a container." data-toggle=tooltip data-placement=top href=/docs/concepts/storage/persistent-volumes/ target=_blank aria-label=PVCs>PVCs</a>.</p>
</li>
</ul>
<h2 id=priorities>Priorities</h2>
<p>The following <em>priorities</em> implement scoring:</p>
<ul>
<li>
<p><code>SelectorSpreadPriority</code>: Spreads Pods across hosts, considering Pods that
belong to the same <a class=glossary-tooltip title="A way to expose an application running on a set of Pods as a network service." data-toggle=tooltip data-placement=top href=/docs/concepts/services-networking/service/ target=_blank aria-label=Service>Service</a>,
<a class=glossary-tooltip title="Manages deployment and scaling of a set of Pods, with durable storage and persistent identifiers for each Pod." data-toggle=tooltip data-placement=top href=/docs/concepts/workloads/controllers/statefulset/ target=_blank aria-label=StatefulSet>StatefulSet</a> or
<a class=glossary-tooltip title="ReplicaSet ensures that a specified number of Pod replicas are running at one time" data-toggle=tooltip data-placement=top href=/docs/concepts/workloads/controllers/replicaset/ target=_blank aria-label=ReplicaSet>ReplicaSet</a>.</p>
</li>
<li>
<p><code>InterPodAffinityPriority</code>: Implements preferred
<a href=/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity>inter pod affininity and antiaffinity</a>.</p>
</li>
<li>
<p><code>LeastRequestedPriority</code>: Favors nodes with fewer requested resources. In other
words, the more Pods that are placed on a Node, and the more resources those
Pods use, the lower the ranking this policy will give.</p>
</li>
<li>
<p><code>MostRequestedPriority</code>: Favors nodes with most requested resources. This policy
will fit the scheduled Pods onto the smallest number of Nodes needed to run your
overall set of workloads.</p>
</li>
<li>
<p><code>RequestedToCapacityRatioPriority</code>: Creates a requestedToCapacity based ResourceAllocationPriority using default resource scoring function shape.</p>
</li>
<li>
<p><code>BalancedResourceAllocation</code>: Favors nodes with balanced resource usage.</p>
</li>
<li>
<p><code>NodePreferAvoidPodsPriority</code>: Prioritizes nodes according to the node annotation
<code>scheduler.alpha.kubernetes.io/preferAvoidPods</code>. You can use this to hint that
two different Pods shouldn't run on the same Node.</p>
</li>
<li>
<p><code>NodeAffinityPriority</code>: Prioritizes nodes according to node affinity scheduling
preferences indicated in PreferredDuringSchedulingIgnoredDuringExecution.
You can read more about this in <a href=/docs/concepts/scheduling-eviction/assign-pod-node/>Assigning Pods to Nodes</a>.</p>
</li>
<li>
<p><code>TaintTolerationPriority</code>: Prepares the priority list for all the nodes, based on
the number of intolerable taints on the node. This policy adjusts a node's rank
taking that list into account.</p>
</li>
<li>
<p><code>ImageLocalityPriority</code>: Favors nodes that already have the
<a class=glossary-tooltip title="Stored instance of a container that holds a set of software needed to run an application." data-toggle=tooltip data-placement=top href="/docs/reference/glossary/?all=true#term-image" target=_blank aria-label="container images">container images</a> for that
Pod cached locally.</p>
</li>
<li>
<p><code>ServiceSpreadingPriority</code>: For a given Service, this policy aims to make sure that
the Pods for the Service run on different nodes. It favours scheduling onto nodes
that don't have Pods for the service already assigned there. The overall outcome is
that the Service becomes more resilient to a single Node failure.</p>
</li>
<li>
<p><code>EqualPriority</code>: Gives an equal weight of one to all nodes.</p>
</li>
<li>
<p><code>EvenPodsSpreadPriority</code>: Implements preferred
<a href=/docs/concepts/workloads/pods/pod-topology-spread-constraints/>pod topology spread constraints</a>.</p>
</li>
</ul>
<h2 id=what-s-next>What's next</h2>
<ul>
<li>Learn about <a href=/docs/concepts/scheduling-eviction/kube-scheduler/>scheduling</a></li>
<li>Learn about <a href=/docs/reference/scheduling/config/>kube-scheduler Configuration</a></li>
<li>Read the <a href=/docs/reference/config-api/kube-scheduler-config.v1beta2>kube-scheduler configuration reference (v1beta2)</a></li>
<li>Read the <a href=/docs/reference/config-api/kube-scheduler-policy-config.v1/>kube-scheduler Policy reference (v1)</a></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-ef4fb938b6b63c95f5f26f9b1cec3054>2 - Scheduler Configuration</h1>
<div style=margin-top:10px;margin-bottom:10px>
<b>FEATURE STATE:</b> <code>Kubernetes v1.19 [beta]</code>
</div>
<p>You can customize the behavior of the <code>kube-scheduler</code> by writing a configuration
file and passing its path as a command line argument.</p>
<p>A scheduling Profile allows you to configure the different stages of scheduling
in the <a class=glossary-tooltip title="Control plane component that watches for newly created pods with no assigned node, and selects a node for them to run on." data-toggle=tooltip data-placement=top href=/docs/reference/command-line-tools-reference/kube-scheduler/ target=_blank aria-label=kube-scheduler>kube-scheduler</a>.
Each stage is exposed in an extension point. Plugins provide scheduling behaviors
by implementing one or more of these extension points.</p>
<p>You can specify scheduling profiles by running <code>kube-scheduler --config &lt;filename></code>,
using the
KubeSchedulerConfiguration (<a href=/docs/reference/config-api/kube-scheduler-config.v1beta1/>v1beta1</a>
or <a href=/docs/reference/config-api/kube-scheduler-config.v1beta2/>v1beta2</a>)
struct.</p>
<p>A minimal configuration looks as follows:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubescheduler.config.k8s.io/v1beta2<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>KubeSchedulerConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>clientConnection</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>kubeconfig</span>:<span style=color:#bbb> </span>/etc/srv/kubernetes/kube-scheduler/kubeconfig<span style=color:#bbb>
</span></code></pre></div><h2 id=profiles>Profiles</h2>
<p>A scheduling Profile allows you to configure the different stages of scheduling
in the <a class=glossary-tooltip title="Control plane component that watches for newly created pods with no assigned node, and selects a node for them to run on." data-toggle=tooltip data-placement=top href=/docs/reference/command-line-tools-reference/kube-scheduler/ target=_blank aria-label=kube-scheduler>kube-scheduler</a>.
Each stage is exposed in an <a href=#extension-points>extension point</a>.
<a href=#scheduling-plugins>Plugins</a> provide scheduling behaviors by implementing one
or more of these extension points.</p>
<p>You can configure a single instance of <code>kube-scheduler</code> to run
<a href=#multiple-profiles>multiple profiles</a>.</p>
<h3 id=extension-points>Extension points</h3>
<p>Scheduling happens in a series of stages that are exposed through the following
extension points:</p>
<ol>
<li><code>queueSort</code>: These plugins provide an ordering function that is used to
sort pending Pods in the scheduling queue. Exactly one queue sort plugin
may be enabled at a time.</li>
<li><code>preFilter</code>: These plugins are used to pre-process or check information
about a Pod or the cluster before filtering. They can mark a pod as
unschedulable.</li>
<li><code>filter</code>: These plugins are the equivalent of Predicates in a scheduling
Policy and are used to filter out nodes that can not run the Pod. Filters
are called in the configured order. A pod is marked as unschedulable if no
nodes pass all the filters.</li>
<li><code>postFilter</code>: These plugins are called in their configured order when no
feasible nodes were found for the pod. If any <code>postFilter</code> plugin marks the
Pod <em>schedulable</em>, the remaining plugins are not called.</li>
<li><code>preScore</code>: This is an informational extension point that can be used
for doing pre-scoring work.</li>
<li><code>score</code>: These plugins provide a score to each node that has passed the
filtering phase. The scheduler will then select the node with the highest
weighted scores sum.</li>
<li><code>reserve</code>: This is an informational extension point that notifies plugins
when resources have been reserved for a given Pod. Plugins also implement an
<code>Unreserve</code> call that gets called in the case of failure during or after
<code>Reserve</code>.</li>
<li><code>permit</code>: These plugins can prevent or delay the binding of a Pod.</li>
<li><code>preBind</code>: These plugins perform any work required before a Pod is bound.</li>
<li><code>bind</code>: The plugins bind a Pod to a Node. <code>bind</code> plugins are called in order
and once one has done the binding, the remaining plugins are skipped. At
least one bind plugin is required.</li>
<li><code>postBind</code>: This is an informational extension point that is called after
a Pod has been bound.</li>
</ol>
<p>For each extension point, you could disable specific <a href=#scheduling-plugins>default plugins</a>
or enable your own. For example:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubescheduler.config.k8s.io/v1beta2<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>KubeSchedulerConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>profiles</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>plugins</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>score</span>:<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>disabled</span>:<span style=color:#bbb>
</span><span style=color:#bbb>        </span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>PodTopologySpread<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>enabled</span>:<span style=color:#bbb>
</span><span style=color:#bbb>        </span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>MyCustomPluginA<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:green;font-weight:700>weight</span>:<span style=color:#bbb> </span><span style=color:#666>2</span><span style=color:#bbb>
</span><span style=color:#bbb>        </span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>MyCustomPluginB<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:green;font-weight:700>weight</span>:<span style=color:#bbb> </span><span style=color:#666>1</span><span style=color:#bbb>
</span></code></pre></div><p>You can use <code>*</code> as name in the disabled array to disable all default plugins
for that extension point. This can also be used to rearrange plugins order, if
desired.</p>
<h3 id=scheduling-plugins>Scheduling plugins</h3>
<p>The following plugins, enabled by default, implement one or more of these
extension points:</p>
<ul>
<li><code>ImageLocality</code>: Favors nodes that already have the container images that the
Pod runs.
Extension points: <code>score</code>.</li>
<li><code>TaintToleration</code>: Implements
<a href=/docs/concepts/scheduling-eviction/taint-and-toleration/>taints and tolerations</a>.
Implements extension points: <code>filter</code>, <code>preScore</code>, <code>score</code>.</li>
<li><code>NodeName</code>: Checks if a Pod spec node name matches the current node.
Extension points: <code>filter</code>.</li>
<li><code>NodePorts</code>: Checks if a node has free ports for the requested Pod ports.
Extension points: <code>preFilter</code>, <code>filter</code>.</li>
<li><code>NodeAffinity</code>: Implements
<a href=/docs/concepts/scheduling-eviction/assign-pod-node/#nodeselector>node selectors</a>
and <a href=/docs/concepts/scheduling-eviction/assign-pod-node/#node-affinity>node affinity</a>.
Extension points: <code>filter</code>, <code>score</code>.</li>
<li><code>PodTopologySpread</code>: Implements
<a href=/docs/concepts/workloads/pods/pod-topology-spread-constraints/>Pod topology spread</a>.
Extension points: <code>preFilter</code>, <code>filter</code>, <code>preScore</code>, <code>score</code>.</li>
<li><code>NodeUnschedulable</code>: Filters out nodes that have <code>.spec.unschedulable</code> set to
true.
Extension points: <code>filter</code>.</li>
<li><code>NodeResourcesFit</code>: Checks if the node has all the resources that the Pod is
requesting. The score can use one of three strategies: <code>LeastAllocated</code>
(default), <code>MostAllocated</code> and <code>RequestedToCapacityRatio</code>.
Extension points: <code>preFilter</code>, <code>filter</code>, <code>score</code>.</li>
<li><code>NodeResourcesBalancedAllocation</code>: Favors nodes that would obtain a more
balanced resource usage if the Pod is scheduled there.
Extension points: <code>score</code>.</li>
<li><code>VolumeBinding</code>: Checks if the node has or if it can bind the requested
<a class=glossary-tooltip title="A directory containing data, accessible to the containers in a pod." data-toggle=tooltip data-placement=top href=/docs/concepts/storage/volumes/ target=_blank aria-label=volumes>volumes</a>.
Extension points: <code>preFilter</code>, <code>filter</code>, <code>reserve</code>, <code>preBind</code>, <code>score</code>.
<div class="alert alert-info note callout" role=alert>
<strong>Note:</strong> <code>score</code> extension point is enabled when <code>VolumeCapacityPriority</code> feature is
enabled. It prioritizes the smallest PVs that can fit the requested volume
size.
</div></li>
<li><code>VolumeRestrictions</code>: Checks that volumes mounted in the node satisfy
restrictions that are specific to the volume provider.
Extension points: <code>filter</code>.</li>
<li><code>VolumeZone</code>: Checks that volumes requested satisfy any zone requirements they
might have.
Extension points: <code>filter</code>.</li>
<li><code>NodeVolumeLimits</code>: Checks that CSI volume limits can be satisfied for the
node.
Extension points: <code>filter</code>.</li>
<li><code>EBSLimits</code>: Checks that AWS EBS volume limits can be satisfied for the node.
Extension points: <code>filter</code>.</li>
<li><code>GCEPDLimits</code>: Checks that GCP-PD volume limits can be satisfied for the node.
Extension points: <code>filter</code>.</li>
<li><code>AzureDiskLimits</code>: Checks that Azure disk volume limits can be satisfied for
the node.
Extension points: <code>filter</code>.</li>
<li><code>InterPodAffinity</code>: Implements
<a href=/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity>inter-Pod affinity and anti-affinity</a>.
Extension points: <code>preFilter</code>, <code>filter</code>, <code>preScore</code>, <code>score</code>.</li>
<li><code>PrioritySort</code>: Provides the default priority based sorting.
Extension points: <code>queueSort</code>.</li>
<li><code>DefaultBinder</code>: Provides the default binding mechanism.
Extension points: <code>bind</code>.</li>
<li><code>DefaultPreemption</code>: Provides the default preemption mechanism.
Extension points: <code>postFilter</code>.</li>
</ul>
<p>You can also enable the following plugins, through the component config APIs,
that are not enabled by default:</p>
<ul>
<li><code>SelectorSpread</code>: Favors spreading across nodes for Pods that belong to
<a class=glossary-tooltip title="A way to expose an application running on a set of Pods as a network service." data-toggle=tooltip data-placement=top href=/docs/concepts/services-networking/service/ target=_blank aria-label=Services>Services</a>,
<a class=glossary-tooltip title="ReplicaSet ensures that a specified number of Pod replicas are running at one time" data-toggle=tooltip data-placement=top href=/docs/concepts/workloads/controllers/replicaset/ target=_blank aria-label=ReplicaSets>ReplicaSets</a> and
<a class=glossary-tooltip title="Manages deployment and scaling of a set of Pods, with durable storage and persistent identifiers for each Pod." data-toggle=tooltip data-placement=top href=/docs/concepts/workloads/controllers/statefulset/ target=_blank aria-label=StatefulSets>StatefulSets</a>.
Extension points: <code>preScore</code>, <code>score</code>.</li>
<li><code>CinderLimits</code>: Checks that <a href=https://docs.openstack.org/cinder/>OpenStack Cinder</a>
volume limits can be satisfied for the node.
Extension points: <code>filter</code>.</li>
</ul>
<p>The following plugins are deprecated and can only be enabled in a <code>v1beta1</code>
configuration:</p>
<ul>
<li><code>NodeResourcesLeastAllocated</code>: Favors nodes that have a low allocation of
resources.
Extension points: <code>score</code>.</li>
<li><code>NodeResourcesMostAllocated</code>: Favors nodes that have a high allocation of
resources.
Extension points: <code>score</code>.</li>
<li><code>RequestedToCapacityRatio</code>: Favor nodes according to a configured function of
the allocated resources.
Extension points: <code>score</code>.</li>
<li><code>NodeLabel</code>: Filters and / or scores a node according to configured
<a class=glossary-tooltip title="Tags objects with identifying attributes that are meaningful and relevant to users." data-toggle=tooltip data-placement=top href=/docs/concepts/overview/working-with-objects/labels target=_blank aria-label=label(s)>label(s)</a>.
Extension points: <code>filter</code>, <code>score</code>.</li>
<li><code>ServiceAffinity</code>: Checks that Pods that belong to a
<a class=glossary-tooltip title="A way to expose an application running on a set of Pods as a network service." data-toggle=tooltip data-placement=top href=/docs/concepts/services-networking/service/ target=_blank aria-label=Service>Service</a> fit in a set of nodes defined by
configured labels. This plugin also favors spreading the Pods belonging to a
Service across nodes.
Extension points: <code>preFilter</code>, <code>filter</code>, <code>score</code>.</li>
<li><code>NodePreferAvoidPods</code>: Prioritizes nodes according to the node annotation
<code>scheduler.alpha.kubernetes.io/preferAvoidPods</code>.
Extension points: <code>score</code>.</li>
</ul>
<h3 id=multiple-profiles>Multiple profiles</h3>
<p>You can configure <code>kube-scheduler</code> to run more than one profile.
Each profile has an associated scheduler name and can have a different set of
plugins configured in its <a href=#extension-points>extension points</a>.</p>
<p>With the following sample configuration, the scheduler will run with two
profiles: one with the default plugins and one with all scoring plugins
disabled.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubescheduler.config.k8s.io/v1beta2<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>KubeSchedulerConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>profiles</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>schedulerName</span>:<span style=color:#bbb> </span>default-scheduler<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>schedulerName</span>:<span style=color:#bbb> </span><span style=color:#a2f;font-weight:700>no</span>-scoring-scheduler<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>plugins</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>preScore</span>:<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>disabled</span>:<span style=color:#bbb>
</span><span style=color:#bbb>        </span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span><span style=color:#b44>&#39;*&#39;</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>score</span>:<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>disabled</span>:<span style=color:#bbb>
</span><span style=color:#bbb>        </span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span><span style=color:#b44>&#39;*&#39;</span><span style=color:#bbb>
</span></code></pre></div><p>Pods that want to be scheduled according to a specific profile can include
the corresponding scheduler name in its <code>.spec.schedulerName</code>.</p>
<p>By default, one profile with the scheduler name <code>default-scheduler</code> is created.
This profile includes the default plugins described above. When declaring more
than one profile, a unique scheduler name for each of them is required.</p>
<p>If a Pod doesn't specify a scheduler name, kube-apiserver will set it to
<code>default-scheduler</code>. Therefore, a profile with this scheduler name should exist
to get those pods scheduled.</p>
<div class="alert alert-info note callout" role=alert>
<strong>Note:</strong> Pod's scheduling events have <code>.spec.schedulerName</code> as the ReportingController.
Events for leader election use the scheduler name of the first profile in the
list.
</div>
<div class="alert alert-info note callout" role=alert>
<strong>Note:</strong> All profiles must use the same plugin in the <code>queueSort</code> extension point and have
the same configuration parameters (if applicable). This is because the scheduler
only has one pending pods queue.
</div>
<h2 id=scheduler-configuration-migrations>Scheduler configuration migrations</h2>
<ul class="nav nav-tabs" id=tab-with-md role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#tab-with-md-0 role=tab aria-controls=tab-with-md-0 aria-selected=true>v1beta1 → v1beta2</a></li>
</ul>
<div class=tab-content id=tab-with-md><div id=tab-with-md-0 class="tab-pane show active" role=tabpanel aria-labelledby=tab-with-md-0>
<p><ul>
<li>
<p>With the v1beta2 configuration version, you can use a new score extension for the
<code>NodeResourcesFit</code> plugin.
The new extension combines the functionalities of the <code>NodeResourcesLeastAllocated</code>,
<code>NodeResourcesMostAllocated</code> and <code>RequestedToCapacityRatio</code> plugins.
For example, if you previously used the <code>NodeResourcesMostAllocated</code> plugin, you
would instead use <code>NodeResourcesFit</code> (enabled by default) and add a <code>pluginConfig</code>
with a <code>scoreStrategy</code> that is similar to:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubescheduler.config.k8s.io/v1beta2<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>KubeSchedulerConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>profiles</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>pluginConfig</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>args</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>scoringStrategy</span>:<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>resources</span>:<span style=color:#bbb>
</span><span style=color:#bbb>        </span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>cpu<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:green;font-weight:700>weight</span>:<span style=color:#bbb> </span><span style=color:#666>1</span><span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>type</span>:<span style=color:#bbb> </span>MostAllocated<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>NodeResourcesFit<span style=color:#bbb>
</span></code></pre></div></li>
<li>
<p>The scheduler plugin <code>NodeLabel</code> is deprecated; instead, use the <a href=/docs/concepts/scheduling-eviction/assign-pod-node/#affinity-and-anti-affinity><code>NodeAffinity</code></a> plugin (enabled by default) to achieve similar behavior.</p>
</li>
<li>
<p>The scheduler plugin <code>ServiceAffinity</code> is deprecated; instead, use the <a href=/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity><code>InterPodAffinity</code></a> plugin (enabled by default) to achieve similar behavior.</p>
</li>
<li>
<p>The scheduler plugin <code>NodePreferAvoidPods</code> is deprecated; instead, use <a href=/docs/concepts/scheduling-eviction/taint-and-toleration/>node taints</a> to achieve similar behavior.</p>
</li>
<li>
<p>A plugin enabled in a v1beta2 configuration file takes precedence over the default configuration for that plugin.</p>
</li>
<li>
<p>Invalid <code>host</code> or <code>port</code> configured for scheduler healthz and metrics bind address will cause validation failure.</p>
</li>
</ul>
</div></div>
<h2 id=what-s-next>What's next</h2>
<ul>
<li>Read the <a href=/docs/reference/command-line-tools-reference/kube-scheduler/>kube-scheduler reference</a></li>
<li>Learn about <a href=/docs/concepts/scheduling-eviction/kube-scheduler/>scheduling</a></li>
<li>Read the <a href=/docs/reference/config-api/kube-scheduler-config.v1beta1/>kube-scheduler configuration (v1beta1)</a> reference</li>
<li>Read the <a href=/docs/reference/config-api/kube-scheduler-config.v1beta2/>kube-scheduler configuration (v1beta2)</a> reference</li>
</ul>
</div>
</main>
</div>
</div>
<footer class=d-print-none>
<div class=footer__links>
<nav>
<a class=text-white href=/docs/home/>Home</a>
<a class=text-white href=/blog/>Blog</a>
<a class=text-white href=/training/>Training</a>
<a class=text-white href=/partners/>Partners</a>
<a class=text-white href=/community/>Community</a>
<a class=text-white href=/case-studies/>Case Studies</a>
</nav>
</div>
<div class=container-fluid>
<div class=row>
<div class="col-6 col-sm-2 text-xs-center order-sm-2">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="User mailing list" aria-label="User mailing list">
<a class=text-white target=_blank href=https://discuss.kubernetes.io>
<i class="fa fa-envelope"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter>
<a class=text-white target=_blank href=https://twitter.com/kubernetesio>
<i class="fab fa-twitter"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Calendar aria-label=Calendar>
<a class=text-white target=_blank href="https://calendar.google.com/calendar/embed?src=calendar%40kubernetes.io">
<i class="fas fa-calendar-alt"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Youtube aria-label=Youtube>
<a class=text-white target=_blank href=https://youtube.com/kubernetescommunity>
<i class="fab fa-youtube"></i>
</a>
</li>
</ul>
</div>
<div class="col-6 col-sm-2 text-right text-xs-center order-sm-3">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub>
<a class=text-white target=_blank href=https://github.com/kubernetes/kubernetes>
<i class="fab fa-github"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack>
<a class=text-white target=_blank href=https://slack.k8s.io>
<i class="fab fa-slack"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Contribute aria-label=Contribute>
<a class=text-white target=_blank href=https://git.k8s.io/community/contributors/guide>
<i class="fas fa-edit"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow">
<a class=text-white target=_blank href=https://stackoverflow.com/questions/tagged/kubernetes>
<i class="fab fa-stack-overflow"></i>
</a>
</li>
</ul>
</div>
<div class="col-12 col-sm-8 text-center order-sm-2">
<small class=text-white>&copy; 2023 The Kubernetes Authors | Documentation Distributed under <a href=https://git.k8s.io/website/LICENSE class=light-text>CC BY 4.0</a></small>
<br>
<small class=text-white>Copyright &copy; 2023 The Linux Foundation &reg;. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href=https://www.linuxfoundation.org/trademark-usage class=light-text>Trademark Usage page</a></small>
<br>
<small class=text-white>ICP license: 京ICP备17074266号-3</small>
</div>
</div>
</div>
</footer>
</div>
<script src=/js/popper-1.14.3.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script>
<script src=/js/bootstrap-4.3.1.min.js integrity=sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM crossorigin=anonymous></script>
<script src=/js/main.min.40616251a9b6e4b689e7769be0340661efa4d7ebb73f957404e963e135b4ed52.js integrity="sha256-QGFiUam25LaJ53ab4DQGYe+k1+u3P5V0BOlj4TW07VI=" crossorigin=anonymous></script>
</body>
</html>